<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment</title>
    <link rel="stylesheet" href="stylepay.css">
</head>
<body>
    <div class="container">
        <!-- Левая часть: карточка выбранного издания -->
        <div class="game-card" id="gameCard">
            <img id="gameImage" src="" alt="Game Edition" class="game-image">
            <h2 id="gameTitle"></h2>
            <p id="gamePrice"></p>
        </div>

        <div class="payment-form">
            <h2>Payment Information</h2>
            <form id="paymentForm" action="/process-payment" method="POST">
                <label for="card-number">Card Number:</label>
                <input type="text" id="card-number" name="card-number" maxlength="16" required><br>

                <label for="expiry-date">Expiry Date:</label>
                <input type="text" id="expiry-date" name="expiry-date" placeholder="MM/YY" required><br>

                <label for="cvv">CVV:</label>
                <input type="text" id="cvv" name="cvv" maxlength="3" required><br>

                <button type="submit" class="pay-button">Pay Now</button>
            </form>
        </div>
    </div>
    <script>
        // Функция для извлечения параметров URL
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Динамическое обновление карточки с выбранным изданием
        window.onload = function() {
            const title = getQueryParam('title');
            const image = getQueryParam('image');
            const price = getQueryParam('price');

            document.getElementById('gameTitle').textContent = title;
            document.getElementById('gameImage').src = image;
            document.getElementById('gamePrice').textContent = `Цена: ${price} руб.`;
        };

        document.getElementById('paymentForm').onsubmit = function(event) {
    event.preventDefault();  // Остановить отправку формы по умолчанию

    // Получаем данные формы
    const cardNumber = document.getElementById('card-number').value;
    const expiryDate = document.getElementById('expiry-date').value;
    const cvv = document.getElementById('cvv').value;

    // Проверка валидности данных (например, проверка длины)
    if (cardNumber.length === 16 && expiryDate.length === 5 && cvv.length === 3) {
        // Имитация успешной оплаты
        setTimeout(() => {
            alert('Оплата успешна!');

            // Перенаправление на страницу с загрузкой
            window.location.href = '/WhateverItTakesLauncher.zip';  // Путь к файлу игры
        }, 1000);  // Имитация времени обработки
    } else {
        alert('Пожалуйста, проверьте данные карты.');
    }
};

    </script>
</body>
</html>
